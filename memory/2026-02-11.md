# 2026-02-11 - OpenClaw Setup Progress

## Completed Today

### Docker & n8n
- Docker Desktop installed via Homebrew (version 29.2.0)
- n8n running in Docker container on port 5678
- Cloudflare tunnel created: `n8n-atlas` (ID: f7cf7648-bb4f-42ad-b92e-12d545ebada4)
- Configured for domain: n8n.ricksanchezautomations.com
- DNS propagation still in progress (can take 10-30 min)

### API Access
- n8n API key stored at: ~/.openclaw/.n8n-api.env
- Can programmatically create/modify workflows via API
- Created sample workflow: "OpenClaw Integration Demo" (ID: 3SFcwT3umowGuAUh)
  - Webhook trigger: http://localhost:5678/webhook/openclaw-trigger
  - Sends Gmail via n8n
  - Currently active

### Gmail OAuth
- Fully authorized with read/send/modify scopes
- Tokens stored at: ~/.openclaw/.gmail-tokens.env
- Account: mortylobster@gmail.com
- 18 messages total

### Local Access URLs
| URL | Status |
|-----|--------|
| http://localhost:5678 | ✅ Working (use this for now) |
| https://n8n.ricksanchezautomations.com | ⏳ DNS propagating |

### Pending Issue
**n8n Gmail OAuth needs redirect URI added to Google Cloud Console:**

Google rejected OAuth with error:
> "No puedes iniciar sesión en esta aplicación porque no cumple con la política OAuth 2.0 de Google"

**Action needed:**
1. Go to: https://console.cloud.google.com/apis/credentials?project=nodal-operand-486015-n8
2. Edit OAuth 2.0 Client ID: `407934747652-v81jd6dml9qc7ee8ar1dam5cooclkj05.apps.googleusercontent.com`
3. Add Authorized Redirect URI:
   ```
   https://localhost:5678/rest/oauth2-credential/callback
   ```
4. Save and retry OAuth in n8n

### Credentials Location
| Service | File | Contents |
|---------|------|----------|
| Gmail OAuth | ~/.openclaw/.gmail-tokens.env | Refresh token, access token, scopes |
| Gmail Client | ~/.openclaw/.gmail-credentials.env | Client ID, Client Secret |
| n8n API | ~/.openclaw/.n8n-api.env | API key for programmatic access |
| Cloudflare | ~/.cloudflared/ | Tunnel cert, config.yml, credentials |

All credential files have 600 permissions (secure).

### Architecture
```
Internet → Cloudflare Tunnel → Mac Mini (localhost:5678) → n8n Docker
                                    ↓
                              OpenClaw (:18789)
                                    ↓
                              Docker Sandbox
```

### Next Steps
1. Add n8n redirect URI to Google Cloud Console
2. Complete Gmail OAuth in n8n UI
3. Test the sample workflow via webhook
4. Wait for DNS propagation of ricksanchezautomations.com

### n8n Login
- Local URL: http://localhost:5678
- User account: Created by Atlas in UI
- Basic auth: atlas / ricksanchez2025 (bypassed after account creation)
